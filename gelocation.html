<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="geo.css"></link>
    <title>Document</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<script src="//geodata.solutions/includes/countrystatecity.js"></script>



</head>

<body>
    <div id =search> 
        <div class="box">
    <div class="container">
        <div class="row row-no-gutters">
        <div class="row">
          <div class="col-sm-2">
            <h3>Country</h3>
            <select name="country" class="countries form-control" width="30px" id="countryId">
          <option value="">Select Country</option>
      </select>
      
          </div>
          <div class="col-sm-2">
            <h3>State</h3>
            <select name="state" class="states form-control" id="stateId">
          <option value="">Select State</option>
      </select>
          </div>
          <div class="col-sm-2">
            <h3>City</h3>        
            <select name="city" class="cities form-control" id="cityId">
          <option value="">Select City</option>
      </select>
          </div>
        <!-- </div> -->
      </div>
    </div>

          
     
          

                    <span i class="glyphicon glyphicon-search" onClick="geoLocation()"></i></span>   
             
        
                 <span>
                <h4>   <p id="cityname"></p></h4>
               <!-- <p id ="out"></p> -->
      

                 <h6> <p id ="description"></p>
            
                 
                   <div class="weather-forcast" id ="weather-forcast"> 
                <div class="weather-forcast-item">
                    <img src="http://openweathermap.org/img/wn/10d@2x.png" alt ="weather icon"  width="40px" height="40px"class="w-icon">

                </div>

                                  </div>
             
            
                
           
                
                <p id ="icon"></p>
                <p id="temp"></p>
                <p id ="humidity"></p>
               
                <p id ="speed"></p>
            <p id ="night"></p></h6>

              
                </span>
            </div>

                    <script>
                        let  x = document.getElementById("out");
                        let y = document.getElementById("cityname"); 
                    let z =document.getElementById("temp");
                    let m = document.getElementById("humidity");
                    let n = document.getElementById("speed");
                    let k = document.getElementById("description");
                    let a =document.getElementById("night");
           
                  
                        function geoLocation(){
                    
                            if(navigator.geolocation){
                                navigator.geolocation.getCurrentPosition(showPosition);
                    
                            }
                                
                                else
                                {
                                    x.innerText ="Geo not supported";
                                }
                        }
                        function showPosition(data){
                            console.log(data);
                            let lat = data.coords.latitude;
                            let long = data.coords.longitude;
                            // let city_name =data.city.name;
                         
                           z.innerText =`Lat is ${lat} ,Long is ${long}`
                     
                      

                const url=`https://api.openweathermap.org/data/2.5/forecast/daily?q=delhi&units=metric&appid=fbf712a5a83d7305c3cda4ca8fe7ef29`
                            
             //  const r=`https://openweathermap.org/weather-conditions#Weather-Condition-Codes-2`
  

                fetch(url,{method:"GET"})
                            .then((res)=>res.json())
                            //resolve the promise
                            .then((data)=>{

                                var iconcode =data.list[4].weather[0].icon;   
        // var iconurl ="http://openweathermap.org/img/w/" + iconcode + " .png"   

                                y.innerText = `Weather in ${data.city.name}`;
                                k.innerText=` ${data.list[4].weather[0].description} ` ;
                                // l.innerText=` ${data.list[4].weather[0].icon}`;
                                 z.innerText = `Temp of day is ${data.list[0].temp.day} Â°C`;
                                 m.innerText =`Humidity :${data.list[3].humidity}%`;
                                 n.innerText = `Wind speed: ${data.list[5].speed} km/h`;
                                 a.innerText = `Night temp: ${data.list[0].temp.night}`;
                             
                                

                                 
            
                            });
                        }

                    </script>
       
      
           

       
    



            
 

    </div>
</body>

</html>