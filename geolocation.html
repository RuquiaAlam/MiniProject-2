<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="geo.css">
  </link>
  <title>Document</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
  <script src="//geodata.solutions/includes/countrystatecity.js"></script>



</head>

<body>
  <div id=search>
    <div class="box">




      <div class="row-sm-2">
        <h4>Country</h4>
        <form>
          <select name="country" class="countries form-control" background-color="#000" id="countryId">
            <option value="">Select Country</option>
          </select>

      </div>
      <div class="row-sm-2">
        <h4>State</h4>
        <select name="state" class="states form-control" id="stateId">
          <option value="">Select State</option>
        </select>
      </div>
      <div class="row-sm-2">
        <h4>City</h4>
        <select name="city" class="cities form-control" id="cityId" >
          <option value="">Select City</option>
        </select>
        </form>

      </div>






<center>
  <button type="button" onclick ="onSelectCity()" >


    <span i class="glyphicon glyphicon-search" onclick="geoLocation()"></i></span>

  </button>
</center>

   

      <span>

        <p id="out"></p>
        <div>
          <h4>Weather In  <span i id="selectCity"></i></span></h4>
         
        </div>
       
        <p id ="selectCountry"></p>


        <h6>
          <p id="description"></p>

         
      
   

        
       <p id ="icon"></p> 
          <p id="temp"></p>
          <p id="humidity"></p>

          <p id="speed"></p>
          <p id="night"></p>
        </h6>

      </span>
    </div>


    <script src="app.js">
    </script>
    <script>


      let x = document.getElementById("out");
 
      let q = document.querySelector("selectCity");
      let k = document.getElementById("description");
      let z = document.getElementById("temp");
      let m = document.getElementById("humidity");
      let n = document.getElementById("speed");
      let a = document.getElementById("night");
      let p = document.querySelector("selectCountry");
      let r = document.querySelector("selectState");
       let u = document.getElementById("icon");
    




      function geoLocation() {



        let selectCity = document.querySelector('#selectCity').innerHTML;




        // const url = `https://api.openweathermap.org/data/2.5/forecast/daily?q=${selectCity}&units=metric&appid=fbf712a5a83d7305c3cda4ca8fe7ef29`;
    
const url =`https://api.openweathermap.org/data/2.5/weather?q=${selectCity}&units=metric&appid=fbf712a5a83d7305c3cda4ca8fe7ef29`



        fetch(url, { method: "GET" })
          .then((res) => res.json())
          
          //resolve the promise
          .then((data) => {
            console.log(data)
            // const img_url =`https://openweathermap.org/img/wn/${data.weather[0].icon}@2x.png`;


            //  q.innerText = `Weather in ${data.city.name}`;
            // k.innerText = ` ${data.list[4].weather[0].description}`;
            k.innerText = ` ${data.weather[0].description}`
            //  l.innerText=` ${data.list[4].weather[0].icon}`;
            z.innerText = `Temp of day is ${data.main.temp} °C`;
            
         m.innerText = `Humidity :${data.main.humidity}%`;
         n.innerText = `Wind speed: ${data.wind.speed} km/h`;
         a.innerText = `Feels like: ${data.main.feels_like}°C`;
        // // u.innerText  = `${data.list[4].weather[0].icon}`;
        u.innerHTML  =`
      
            <img src = "https://openweathermap.org/img/wn/${data.weather[0].icon}@2x.png"  alt="" width="30px" height ="40px"/>`

          });

      }
    </script>


  </div>
</body>

</html>